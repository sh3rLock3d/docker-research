<div dir = 'rtl'>

# داکر ( Docker )
```Docker``` به توسعه‌دهندگان کمک می‌کند تا ظروف نرم‌افزاری (software portable) سبک و قابل حمل را بسازند که کار توسعه، آزمایش و استقرار برنامه‌ها را ساده می‌کند. داکر از محیطی‌های کوچک و بزرگ اجزای هسته سیستم عامل به صورت مشترک استفاده می‌کند که کاربران بتوانند به راحتی یک اپلیکیشن را طراحی یا توسعه دهند که بهترین بخش این مسئله این است که داکر در صورت نیاز این اجزا را از یکدیگر جدا می‌کند و در محیطی که ایزوله نام دارد قرار می‌دهد،  به این محیط و بسته‌ی ایزوله، کانتینر ```Container``` می‌گویند.
## کاربرد داکر چیست؟
```Docker``` دسترسی کاربران به برنامه‌های مختلف حتی در سرور‌های قدیمی را فراهم می‌کند. همچنین داکر این قابلیت را دارد که ارسال و بسته‌بندی برنامه را راحت‌تر انجام دهد. تقریبا پنج سال پیش بود که شخصی به نام ```Solomon Hykes``` کسب و کاری با استفاده از دارکر تاسیس و راه‌اندازی کرد. مهم‌ترین هدفی که این عمل داشت این بود که کاربران راحتر بتوانند با ```Container``` ارتباط برقرار کنند یا به نوعی دیگر با آنان تعامل داشته باشند.

با انتشار نسخه Docker 1.0 خوشبختانه این کسب و کار با موفقیت چشم‌گیری روبه رو شد و با گذشت زمان مخصوصا در سال ۲۰۱۴ کاربران زیادی جذب داکر (Docker) شدند و دارکر محبوبیت زیادی در آن سال‌ها برای خود کسب کرد. با پیشرفت فوق‌العاده‌ی داکر شرکت‌هایی که از سرور‌های قدیمی و ماشین‌های مجازی استفاده می‌کردند، مجاب به استفاده از داکر شدند و سرویس‌ها و سرورهای خود را براساس بستر داکر راه‌اندازی کردند.

نکته حایز اهمیتی که برای داکر وجود داشت این بود که در آن زمان که هنوز داکر در نسخه 1.0 قرار داشت بانک‌های معروف و بزرگ از آن برای سرویس‌ها و سرورهای خود استفاده می‌کردند که این مورد نشان دهنده امنیت بالای داکر در آن زمان بود.
## راهنمای نصب داکر
برای نصب داکر بر روی سیستم عامل لینوکس خود دو راه وجود دارد:
### روش اول: نصب داکر از ریپوهای پیش فرض

گام اول: آپدیت کردن نرم افزارها

برای اینکه مطمئن شویم از نسخه به به روز نرم افزارها استفاده می‌کنیم، ابتدا دستور زیر را در ترمینال وارد می‌کنیم و صبر می‌کنیم تا فرآیند تمام شود:
<div dir = 'ltr'>
  
```
sudo apt-get update
```  
</div>

گام دوم: حذف نسخه قبلی داکر

برای اینکه از نسخه جدید و به روز شده داکر استفاده کنیم، پیشنهاد می‌شود نسخه قبلی را پاک کنیم، برای این کار دستور زیر را در ترمینال وارد کنید:
<div dir = 'ltr'>
  
```
sudo apt-get remove docker docker-engine docker.io
```  
</div>

گام سوم: نصب داکر

برای نصب داکر بر روی سیستم عامل لینوکس خود دستور زیر را در ترمینال وارد کنید:
<div dir = 'ltr'>
  
```
sudo apt install docker.io
```  
</div>

گام چهارم: بالا آورن داکر

سرویس داکر برای راه اندازی نیاز اجرا در ابتدا دارد، برای این کار دو دستور زیر را در ترمینال، یکی بعد از اجرای دیگری وارد کنید:
<div dir = 'ltr'>
  
```
sudo systemctl start docker
```  
```
sudo systemctl enable docker
```  
</div>

گام پنجم: چک کردن ورژن داکر نصب شده

در انتها برای اطمینان از صحت داکر نصب شده دستور زیر را وارد کرده تا نسخه داکر نصب شده را ببینید:
<div dir = 'ltr'>
  
```
docker --version
```  
</div>

### روش دوم: نصب داکر از ریپو رسمی

گام اول: آپدیت کردن نرم افزارها

برای اینکه مطمئن شویم از نسخه به به روز نرم افزارها استفاده می‌کنیم، ابتدا دستور زیر را در ترمینال وارد می‌کنیم و صبر می‌کنیم تا فرآیند تمام شود
<div dir = 'ltr'>
  
```
sudo apt-get update
```  
</div>

گام دوم: دانلود وابستگی‌ها

برای اینکه به سیستم عامل خود اجازه دهید به ریپوهای Docker از طریق HTTPS دسترسی پیدا کند ، باید این دستورات را در ترمینال اجرا کنید.
<div dir = 'ltr'>
  
```
sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
```  
</div>

برای اینکه دید کلی از دستورات بالا داشته باشیم، تفسیر دستورات بالا اینگونه است:

  - ```apt-transport-https``` : به package manager اجازه می‌دهد تا داده و فایل‌ها را از طریق https انتقال دهد.
  - ```ca-certificates``` : به مرورگر وب اجازه می‌دهد تا گواهی‌های امنیتی را بررسی کند.
  - ```curl``` : این ابزاری برای انتقال داده است.
  - ```software-properties-common``` : اسکریپت‌هایی را برای مدیریت نرم افزار اضافه می‌کند.
  
گام سوم: اضافه کردن Docker’s GPG Key
<div dir = 'ltr'>
  
```
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add –
```  
</div>
گام چهارم: نصب ریپو داکر
<div dir = 'ltr'>
  
```
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu  $(lsb_release -cs)  stable" 
```  
</div>
گام پنجم: آپدیت کردن ریپوها
<div dir = 'ltr'>
  
```
sudo apt-get update
```  
</div>
گام ششم: نصب آخرین نسخه داکر
<div dir = 'ltr'>
  
```
sudo apt-get install docker-ce
```  
</div>
گام هفتم(اختیاری): نصب نسخه مشخص از داکر
<div dir = 'ltr'>
  
```
apt-cache madison docker-ce
```  
</div>

## چه کسانی از Docker استفاده می کنند؟
خالی
## کانتینرها و داکر
```Container``` این امکان را برای برنامه نویسان و توسعه دهندگان اپلیکیشن ها فراهم می کند تا یک برنامه را با تمام ماژول ها و کامپوننت‌های وابسته آن ( مانند کتابخانه ها ، توابع و … ) یکی کرده و به صورت یک پکیج درآورده تا آن برنامه تولید شده در پلتفرم ها و سیستمهای مختلف بدون مشکل اجرا شود، در حقیقت بدون نگرانی از تنظیمات و وابستگ‌های یک Application خاص در پلتفرم های دیگر، آن برنامه در هر محیطی اجرا شود.
## اصطلاحاتی که در زمینه ی داکر استفاده می شوند
خالی
### Docker file
داکر یک image را به وسیله ی خواندن دستورات موجود در یک dockerfile می سازد. یک dockerfile یک فایل text است که تمامی دستوراتی که نیاز برای صدا زده شدن است تا یک image ساخته شود.  یک کاربر برای ساختن یک فایل image از دستور ``` docker build ``` استفاده می کند و خود داکر به طور اتوماتیک با استفاده از خواندن دستورات dockerfile این فایل image را می سازد. ورودی و خروجی این کد را در زیر مشاهده می کنید.

<div dir = 'ltr'>
  
```
$ docker build .

Sending build context to Docker daemon  6.51 MB
...
```
</div>

![enter image description here](https://miro.medium.com/max/2400/1*p8k1b2DZTQEW_yf0hYniXw.png)

### Docker image
خالی
### Docker containers

![enter image description here](https://miro.medium.com/max/700/0*ujI404Gnomn1Wz5h.png)

### Docker Hub
خالی
### Docker deployment and orchestration
خالی
### Docker compose
خالی
### kubernetes
خالی
## چگونگی استفاده از Docker و دستورات آن
### چگونه از یک Docker image کانتینر بسازیم؟
همان طور که در بالاتر گفته شد برای ساخت یک کانتینر نیاز به Image داریم. با داشتن این ایمیج و دستور docker run می توان کانتینر مورد نظر را ساخت.

<div dir = 'ltr'>
  
```
sudo docker run -d IMAGE_ID_OR_NAME
sudo docker run -itd IMAGE_ID_OR_NAME
```
</div>

در یکی از دستورات بالا از آپشن d و در دیگری از آپشن i و t و d استفاده کردیم. در docker run آپشن های دیگری نیز وجود دارد که در زیر به آن ها اشاره می کنیم:

  - ```-i``` : که stdin را حتی در صورت متصل نبودن باز نگه می دارد.
  - ```-t``` : یک tty از کانتینر می سازد.
  - ```-p``` : یک پورت از کانتینر را به یک پورت از هاست متصل می کند.
  - ```-v``` : یک مسیر از کانتینر را به یک مسیر از هاست مپ می کند.
  - ```-a``` : به STDIN و STDOUT یا STDERR متصل می شود.
  - ```-d``` : کانتینر را در بک گراند اجرا می کند.
  - ```--rm``` : به صورت اتوماتیک کانتینر را اگر وجود داشت حذف میکند.
  - ```--name``` : به کانتینر یک نام اختصاص می دهد.
  
در این آدرس می توانید لیست کاملی از آپشن های Docker run را مشاهده کنید.

https://docs.docker.com/engine/reference/run
  
### چگونه از حال یک کانتینر باخبر شویم ؟
در این قسمت می خواهیم نسان دهیم چگونه می توان از حال یک داکر باخبر شد.

با دستور ``` docker ps ``` می توان تمامی کانتینر های در حال اجرا را نشان داد. به عنوان مثال در زیر می توان دید.

<div dir = 'ltr'>
  
```
$ docker ps

CONTAINER ID        IMAGE                        COMMAND                CREATED              STATUS              PORTS               NAMES
4c01db0b339c        ubuntu:12.04                 bash                   17 seconds ago       Up 16 seconds       3300-3310/tcp       webapp
d7886598dbe2        crosbymichael/redis:latest   /redis-server --dir    33 minutes ago       Up 33 minutes       6379/tcp            redis,webapp/db
```

</div>

برای دیدن تمامی کانتینر ها  از دستور ``` sudo docker ps -a ``` استفاده می کنیم.
برای دیدن log یک کانتینر از دستور زیر استفاده می کنیم.

<div dir = 'ltr'>

``` sudo docker logs ID_OR_NAME_OF_A_CONTAINER ```

</div>

برای دیدن اطلاعات یک کانتینر خاص از دستور زیر استفاده می کنیم.

<div dir = 'ltr'>

``` sudo docker inspect ID_OR_NAME_OF_A_CONTAINER ```

</div>

برای استارت یا استاپ یا ریستارت کردن یک کانتینر از دستور های زیر استفاده می کنیم.

<div dir = 'ltr'>

```
sudo docker start ID_OR_NAME_OF_A_CONTAINER
sudo docker stop ID_OR_NAME_OF_A_CONTAINER
sudo docker restart ID_OR_NAME_OF_A_CONTAINER
```
</div>

### چگونه وارد کانتینر شویم؟
برای وارد شدن به کانتینر از دستور ``` docker exec ``` استفاده می کنیم.

<div dir = 'ltr'>
  
``` docker exec [OPTIONS] CONTAINER COMMAND [ARG...] ```

</div>

به عنوان مثال دستور  ``` $ docker exec -d ubuntu_bash touch /tmp/execWorks ``` فایل /tmp/execWorks را درون کانتینر ubuntu_bash در پس زمینه اجرا می کند.

### چگونه کانتینرمان را پاک کنیم؟
برای پاک کردن یک کانتینر از دستور docker rm استفاده می کنیم.

<div dir = 'ltr'>
 
``` sudo docker rm ID_OR_NAME_OF_A_CONTAINER ``` 

</div>

با این دستور تنها کانتینر هایی که در حالت stop هستند را می توان اجرا کرد. اگر کانتینر در حالت start بود از آپشن ``` -f ``` استفاده می کنیم.

## مزایای Docker
خالی

</div>
